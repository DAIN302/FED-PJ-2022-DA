<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>배열의 메서드 활용</title>
    <style>
        html,
        body {
            margin: 0;
            padding: 0;
        }

        h1,
        h2 {
            text-align: center;
        }

        .controler {
            padding: 15px;
            width: 100%;
            text-align: center;
        }

        .cont ul {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            margin: 0;
            padding: 0;
            list-style: none;
            overflow: hidden;
        }

        .cont li {
            width: 100px;
            height: 100px;
            border: 2px solid red;
            border-radius: 50%;
            margin: 10px;
            text-align: center;
            line-height: 100px;
            font-size: 25px;
            white-space: nowrap;
        }

        /* 배열정보 보이기 */
        .showit {
            padding: 15px;
            border: 4px dotted blue;
            text-align: center;
            font-size: 20px;
            font-weight: bold;
        }

        /* 버튼 */
        .mbtn,
        #sel {
            font-size: 20px;
            padding: 10px;
            border-radius: 10px;
            margin-bottom: 20px;
        }
        /* 입력양식 */
        label,input,select {
            font-size: 20px;
        }
    </style>
    <script>
        /////////// 로드구역 ///////////////////////////
        window.addEventListener("DOMContentLoaded",()=>{

            console.log("로딩완료!");

            // DOM 선택 함수
            const qs = x => document.querySelector(x);
            const qsa = x => document.querySelectorAll(x);

            // 콘솔찍기함수
            const cg = x => console.log(x);

            // 1. 배열변수 선언과 할당
            const fruit = ["배", "사과", "용과", "딸기"];

            // 2. 과일명과 배경이미지 명을 매칭 -> 객체
            const frObj = {
                "배" : "fruits_01",
                "사과" : "fruits_02",
                "용과" : "fruits_14",
                "딸기" : "fruits_09",
                "두리안" : "fruits_17",
                "바나나" : "fruits_15",
                "수박" : "fruits_12",
                "파인애플" : "fruits_13",
                "망고" : "fruits_24",
                "오렌지" : "fruits_03",
                "체리" : "fruits_05",
                "멜론" : "fruits_11",
                "블루베리" : "fruits_20",
                "레몬" : "fruits_04",
            }; ///////////// frObj 객체 /////////////

            // 3. 대상요소
            // (1) 배열정보출력 : .showit
            const showit = qs(".showit");

            // (2) 배열로 이미지 출력 : .cont
            const cont = qs(".cont");

            // (3) 조작버튼 요소들 : .mbtn
            const mbtn = qsa(".mbtn");

            // (4) 선택박스 : #sel
            const sel = qs("#sel");

            // console.log(showit, cont, mbtn, sel);
            
            // 4. 처음 배열 출력
            // 배열출력함수만들기(할당형 함수)
            const showArr = () => {
                showit.innerText = fruit.join("★");
            }; ///// showArr 함수
            
            // [ 배열메서드1 ] : join
            // join(구분자) -> 배열사이에 구분자를 넣고 문자로 변환
            
            // 처음 배열정보 호출하여 찍기
            showArr();
            // showArr는 할당형 함수이기 때문에 할당하기 전 호출하면 호출되지 않음
            // 선언형 함수면 선언되기 전에 호출해도 호출됨

            // fruit.push("바나나");

            // 5. 과일주세요 버튼 클릭 시 배열정보로 과일박스 만들고 이미지 출력
            mbtn[0].onclick = () => {
                // 1. 호출확인
                // cg("과일주셈");

                // fruit.push("바나나");
                // 2. 변경내용 : 배열의 과일만큼 ul>li를 생성하여 html로 .cont에 출력
                let hcode = "<ul>";
                // hcode을 ul로 시작    
                
                // forEach() 메서드로 배열만큼 돌아서 li만들기
                // forEach((값, 순번, 객체)=>{코드})
                // frObj[val] -> 배열값과 같은 이름의 객체값 가져오기
                // -> 과일 이미지명 정보
                fruit.forEach((val)=>{
                    // li hcode 생성
                    hcode += `
                        <li style="background:url(addimg/${frObj[val]}.png) no-repeat center/cover">
                            ${val}    
                        </li>
                    `;
                    // val 의 개수만큼 hcode 반복
                }); ////// forEach 

                // fruit.push("바나나");
                // 바나나를 추가하고 싶으면 클릭이벤트 전에 넣어줘야함
                // 혹은 클릭이벤트 안에 넣어주자
                // forEach()메서드 전에 넣어줘야하는것같다.

                hcode += "</ul>";
                // 마지막에 </ul>로 닫아주기

                // 화면출력
                cont.innerHTML = hcode;

            } /// 클릭이벤트 함수

            // 6. 과일 이미지명 세팅의 객체 속성명으로 과일 선택박스(#sel) 옵션 세팅
            // -> 선택박스의 데이터를 만드는 것을 '데이터 바인딩'이라 한당 
            // 대상 : sel 변수
            // 지역변수화를 해서 세팅하자
            // 바로 실행하는 함수 만들기
            // (함수)() -> 자기 자신이 바로 실행됨
            (()=>{
                // 임시변수(코드담기)
                let temp = "";

                // 객체를 위한 for문 -> for in문
                // 대상 객체 :  frObj
                // 변수 x는 객체속성명
                // x는 과일명으로 모두 세팅되어 있음
                for(let x in frObj) {
                    temp += `
                        <option>${x}</option>
                    `
                    // option에 value를 넣지 않아도 자바스크립트가 알아서 value속성값을 x로 세팅해줌
                    // -> value값과 x값이 동일하다면 문제 없당!
                    // -> 다르면 알아서 넣어주면 될일
                }///// for in문

                // 선택박스에 코드 넣기
                sel.innerHTML = temp;
            })();  // 바로 실행되는 함수
            
            // 7. 뒷배열추가요 버튼 클릭 시 -> 현재 선택된 #sel 과일을 맨뒤에 추가
            // 대상 : mbtn[1]
            mbtn[1].onclick = () => {
                // 1. 호출확인
                // cg("뒷배열추가");

                // 2. 선택대상의 값을 배열 맨 뒤에 추가
                // 선택대상 : #sel인 선택박스의 값
                // 배열의 맨뒤 값 추가
                // [ 배열메서드 2 ] : push
                fruit.push(sel.value);
                // sel.value 는 원래 value 속성값을 읽어옴 
                // 현재 value 속성이 없으므로 데이터값 읽어암(태그 사이의 값 == 데이터값)

                // 3. 배열정보 화면에 출력
                showArr();

                // 중간배열삽입으로 과일 선택 후, 뒷배열추가 누르면 배열에 추가되고, 과일주세요 누르면 
                // 배열에 추가된 과일이 화면에 출력됨

                // 4. 현재배열선택밗 업데이트 함수호출
                makeSel();  
                                  
            }; // 클릭이벤트 함수

            // 8. 앞배열추가요 버튼 클릭 시 -> 현재 선택된 #sel 과일을 맨앞에 추가
            // 대상 : mbtn[2]
            mbtn[2].onclick = () => {
                // 1. 호출 확인
                // cg("맨앞");

                // 2. 선택대상의 값을 배열 맨 앞에 추가
                // 배열의 맨앞 값 추가
                // [ 배열메서드 3 ] : unshift
                // 참고 : https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Global_Objects/Array/unshift
                fruit.unshift(sel.value);

                // 3. 배열정보 화면에 출력
                showArr();

                // 4. 현재배열선택밗 업데이트 함수호출
                makeSel();                

            }; // 클릭이벤트 함수

            // 9. 뒷배열삭제요 버튼 클릭 시 -> 맨뒤배열값 삭제
            // 대상 : mbtn[3]
            mbtn[3].onclick = () => {
                // 1. 호출 확인

                // 2. 선택대상의 값을 배열
                // 배열의 맨뒤의 값 삭제
                // [ 배열메서드 4 ] : pop
                // 배열에서 마지막 요소를 제거
                fruit.pop();

                // 3. 배열정보 화면에 출력
                showArr();

                // 4. 현재배열선택밗 업데이트 함수호출
                makeSel();                    

            }; // 클릭이벤트 함수

            // 10. 앞배열삭제요 버튼 클릭 시 -> 맨앞배열값 삭제
            // 대상 : mbtn[4]
            mbtn[4].onclick = () => {
                // 1. 호출 확인

                // 2. 선택대상의 값을 배열
                // 배열의 맨앞의 값 삭제
                // [ 배열메서드 5 ] : shift
                // 배열에서 첫번째 요소 제거
                fruit.shift();

                // 3. 배열정보 화면에 출력
                showArr();

                // 4. 현재배열선택밗 업데이트 함수호출
                makeSel();                    

            }; // 클릭이벤트 함수
            

            // 11. 중간배열삭제 및 추가를 위해
            // 현재 배열번호 선택박스와 지울개수를 요소에 세팅
            // 1. 대상선정
            // (1) 현재 배열 선택박스 #anum
            const anum = qs("#anum");
            // (2) 삭제할 개수 input 박스 #delnum
            const delnum = qs("#delnum");

            /*************************************************
                현재 배열을 선택박스에 세팅하는 함수
            *************************************************/ 
           
            const makeSel = () => {
                // 1. 호출확인
                // cg("메롱");

                // 2. 현재배열선택박스 업데이트
                // 변경대상 : anum변수
                // 데이터는 어디서 가져오나 -> fruit 배열변수

                // 현재배열박스초기화
                // 초기화하지 않으면 기존에 있던 데이터가 중첩되서 추가됨
                anum.innerHTML = "";
                fruit.forEach((val, idx)=>{
                    anum.innerHTML += `
                        <option value=${idx}>${val}</option>
                    `;
                }) /////////// forEach ///////////////////

            }; //////// makeSel 함수

            // 최초 호출
            makeSel();

            // 12. 중간배열삭제 버튼
            // 대상 : mbtn[5]
            mbtn[5].onclick = () => {
                // 1. 호출확인
                // cg("중간이얌");
                
                // 2. 중간배열삭제
                // [ 배열메서드 6 ] : splice
                // 삭제 시 
                // splice(순번) : 순번부터 뒤 모두 지움
                // splice(순번, 개수) : 순번부터 몇개 지움

                // 순번은 현재 배열 선택박스에서(anum) 선택하여 value 에 있는 순번값을 가져옴

                // 만약 지울값이 빈값이거나 숫자가 아니면 선택 순번부터 모두 지움
                // isNaN(값) -> 숫자가 아니면 true
                if(delnum.value ==" " || isNaN(delnum.value)) {
                    fruit.splice(anum.value);
                } // if 
                else { // delnum.value 숫자면 개수만큼 지우기
                    fruit.splice(anum.value, delnum.value);
                } // else
                cg(anum.value);

                // 3. 배열정보 화면에 출력
                showArr();

                // 4. 현재배열선택밗 업데이트 함수호출
                makeSel();                   
                
            }; ///////////// click 함수

            // 13. 중간배열삽입 버튼
            // 대상 : mbtn[6]
            mbtn[6].onclick = () => {
                // 1. 호출확인
                // cg("중간이얌");
                
                // 2. 중간배열삭제
                // [ 배열메서드 7 ] : splice
                // 삽입 시 
                // splice(순번, 0, 넣을값, 넣을값,...) :
                // 순번뒤에 0을 쓰고 그 뒤에 넣을 값을 계속 넣을 수 있음
                // 선택순번 앞에 배열값이 삽입됨

                // 순번은 현재 배열 선택박스에서(anum) 선택하여 value 에 있는 순번값을 가져옴
                // 넣을 과일 이름은 과일 선택박스에서 선택 -> sel변수
                fruit.splice(anum.value, 0, sel.value);
                // 선택과일 앞에 넣을 과일이 들어감

                // 3. 배열정보 화면에 출력
                showArr();

                // 4. 현재배열선택밗 업데이트 함수호출
                makeSel();                   
                
            }; ///////////// click 함수




        }); ////////// 로드구역 ////////////////////////
    </script>
</head>

<body>
    <h1>배열의 메서드 활용</h1>
    <!-- 배열정보보기 -->
    <h2>배열정보보기</h2>
    <div class="showit"></div>
    <!-- 컨트롤 버튼 -->
    <div class="controler">
        <!-- 과일기능버튼 -->
        <button class="mbtn">과일주세요~!</button> <br>
        <button class="mbtn">뒷배열추가요~!</button>
        <button class="mbtn">앞배열추가요~!</button>
        <button class="mbtn">뒷배열삭제요~!</button>
        <button class="mbtn">앞배열삭제요~!</button> <br>

        <button class="mbtn">중간배열삭제</button>
        <label for="anum">선택과일:</label>
        <select name="anum" id="anum">
            <option>0</option>
        </select>
        <label for="delnum">지울개수:</label>
        <input type="text" id="delnum" value="1" maxlength="1">
        <br>

        <button class="mbtn">중간배열삽입</button>
        위의 선택번호사용+과일은 리스트에서 선택!
        <!-- 과일선택박스 -->
        <select name="sel" id="sel">
            <option>과일</option>
        </select>
    </div>
    <!-- 출력박스 -->
    <div class="cont"></div>
</body>

</html>